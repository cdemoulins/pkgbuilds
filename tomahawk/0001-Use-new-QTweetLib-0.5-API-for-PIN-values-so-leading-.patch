From c6cd6821bfe1e2c2a8de10f1ca3ea30940dbf27c Mon Sep 17 00:00:00 2001
From: Jeff Mitchell <tomahawk@jefferai.org>
Date: Fri, 9 Mar 2012 18:23:48 -0500
Subject: [PATCH] Use new QTweetLib 0.5 API for PIN values so leading zeros
 are respected

---
 src/accounts/twitter/tomahawkoauthtwitter.cpp |   10 +++++-----
 src/accounts/twitter/tomahawkoauthtwitter.h   |    2 +-
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/src/accounts/twitter/tomahawkoauthtwitter.cpp b/src/accounts/twitter/tomahawkoauthtwitter.cpp
index b9b7e65..7cf2a64 100644
--- a/src/accounts/twitter/tomahawkoauthtwitter.cpp
+++ b/src/accounts/twitter/tomahawkoauthtwitter.cpp
@@ -12,15 +12,15 @@ TomahawkOAuthTwitter::TomahawkOAuthTwitter( QNetworkAccessManager *nam, QObject*
 }
 
 
-int
+const QString
 TomahawkOAuthTwitter::authorizationWidget()
 {
     bool ok;
-    int i = QInputDialog::getInt(0, tr( "Twitter PIN" ), tr( "After authenticating on Twitter's web site,\nenter the displayed PIN number here:" ), 0, 0, 2147483647, 1, &ok);
-    if (ok)
-        return i;
+    const QString str = QInputDialog::getText(0, tr( "Twitter PIN" ), tr( "After authenticating on Twitter's web site,\nenter the displayed PIN number here:" ), QLineEdit::Normal, QString(), &ok);
+    if ( ok && !str.isEmpty() )
+        return str;
 
-    return 0;
+    return QString();
 }
 
 void
diff --git a/src/accounts/twitter/tomahawkoauthtwitter.h b/src/accounts/twitter/tomahawkoauthtwitter.h
index 7cd243e..ad04830 100644
--- a/src/accounts/twitter/tomahawkoauthtwitter.h
+++ b/src/accounts/twitter/tomahawkoauthtwitter.h
@@ -17,7 +17,7 @@ public:
     ~TomahawkOAuthTwitter() {}
 
 protected:
-    virtual int authorizationWidget();
+    virtual const QString authorizationWidget();
 
 private slots:
     void error();
-- 
1.7.9.3

